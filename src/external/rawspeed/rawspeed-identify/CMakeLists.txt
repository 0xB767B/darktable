
include_directories(${CMAKE_CURRENT_SOURCE_DIR}/..)
include_directories(${CMAKE_CURRENT_BINARY_DIR}/..)

add_executable(darktable-rs-identify main.cpp)
set_target_properties(darktable-rs-identify PROPERTIES CMAKE_BUILD_WITH_INSTALL_RPATH TRUE)
set_target_properties(darktable-rs-identify PROPERTIES CMAKE_INSTALL_RPATH_USE_LINK_PATH FALSE)
if(APPLE)
  set_target_properties(darktable-rs-identify PROPERTIES INSTALL_RPATH @loader_path/../${LIB_INSTALL}/darktable)
else(APPLE)
  set_target_properties(darktable-rs-identify PROPERTIES INSTALL_RPATH $ORIGIN/../${LIB_INSTALL}/darktable)
endif(APPLE)
set_target_properties(darktable-rs-identify PROPERTIES LINKER_LANGUAGE CXX)
if(CMAKE_COMPILER_IS_GNUCC)
	if (GCC_VERSION VERSION_GREATER 4.3)
		if (CMAKE_SYSTEM_NAME MATCHES "^(DragonFly|FreeBSD|NetBSD|OpenBSD)$")
			message("-- Force link to libintl on *BSD with GCC 4.3+")
			target_link_libraries(darktable-rs-identify -lintl)
		endif()
	endif()
endif()
add_dependencies(darktable-rs-identify ${LIB_DEPS})
target_link_libraries(darktable-rs-identify ${_LIBS})
install(TARGETS darktable-rs-identify DESTINATION bin)
